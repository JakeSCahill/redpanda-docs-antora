<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Kafka Client Code Examples :: Redpanda Docs</title>
    <meta name="description" content="How to produce to and consume from Redpanda in a variety of languages.">
    <meta name="generator" content="Antora 3.1.2">
<link rel="stylesheet" href="../../../_/css/site.css">
<link rel="stylesheet" href="../../../_/css/vendor/tabs.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../..">Redpanda Docs</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Services</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="redpanda" data-version="23.1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Redpanda</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="intro-to-events.html">Get Started</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="architecture.html">How Redpanda Works</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="code-examples.html">Kafka Client Code Examples</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Redpanda</span>
    <span class="version">23.1</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../index.html">Redpanda</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">23.1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="intro-to-events.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Redpanda</a></li>
    <li><a href="intro-to-events.html">Get Started</a></li>
    <li><a href="code-examples.html">Kafka Client Code Examples</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="file:///Users/jakecahill/Documents/redpanda-docs-antora/antora-docs/modules/get-started/pages/code-examples.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Kafka Client Code Examples</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Redpanda is Kafka API-compatible, which means that despite Redpanda being a
new streaming data platform, you can leverage the countless client libraries
that have been created for Kafka. If you find something that is not
supported, reach out to our team in the community <a href="https://redpanda.com/slack">Slack</a>.</p>
</div>
<div class="paragraph">
<p>This example walks you through how to get started with a variety of Kafka
client libraries by creating a topic, producing some data, and consuming it
back.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_set_up_redpanda"><a class="anchor" href="#_set_up_redpanda"></a>Set up Redpanda</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Follow the <a href="quick-start.adoc" class="bare">quick-start.adoc</a> guide to spin up a development
environment in Docker. If you already have a Redpanda Cloud
cluster, then you&#8217;re good to go; this example will show you how to connect to that too.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you&#8217;re running Redpanda on your laptop, or in a shared development
environment, then avoid using Redpanda&#8217;s optimized production settings. Running
<code>sudo rpk redpanda tune all</code> or manually configuring Redpanda for production
might affect your experience with other applications running on your machine.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_prepare_the_client_environment"><a class="anchor" href="#_prepare_the_client_environment"></a>Prepare the client environment</h2>
<div class="sectionbody">
<div id="_tabs_1" class="openblock tabs is-sync is-loading">
<div class="content">
<div class="ulist tablist">
<ul>
<li id="_tabs_1_go" class="tab">
<p>Go</p>
</li>
<li id="_tabs_1_node_js" class="tab">
<p>Node.js</p>
</li>
<li id="_tabs_1_python" class="tab">
<p>Python</p>
</li>
</ul>
</div>
<div id="_tabs_1_go--panel" class="tabpanel" aria-labelledby="_tabs_1_go">
<div class="paragraph">
<p>Download and install Go from [go.dev](<a href="https://go.dev/doc/install" class="bare">https://go.dev/doc/install</a>).</p>
</div>
<div class="paragraph">
<p>This Kafka client code example uses the [franz-go](<a href="https://github.com/twmb/franz-go" class="bare">https://github.com/twmb/franz-go</a>) library.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># Create and enter the project folder
mkdir redpanda-go; cd redpanda-go
# Initialize the project
go mod init com/redpanda/example
# Install required dependencies
go get github.com/twmb/franz-go
go get github.com/twmb/franz-go/pkg/kadm
go get github.com/twmb/tlscfg
go get github.com/twmb/franz-go/pkg/sasl/scram@v1.9.0</code></pre>
</div>
</div>
</div>
<div id="_tabs_1_node_js--panel" class="tabpanel" aria-labelledby="_tabs_1_node_js">
<div class="paragraph">
<p>Download and install Node.js [here](<a href="https://nodejs.org/en/download" class="bare">https://nodejs.org/en/download</a>).</p>
</div>
<div class="paragraph">
<p>This example uses the [KafkaJS](<a href="https://kafka.js.org/" class="bare">https://kafka.js.org/</a>) library.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># Create and enter the project folder
mkdir redpanda-node; cd redpanda-node
# Generate package.json (the default values are fine)
npm init
# Install required dependencies
npm i -D typescript npm i -D @types/node npm i kafkajs
# Generate
tsconfig.json tsc --init</code></pre>
</div>
</div>
</div>
<div id="_tabs_1_python--panel" class="tabpanel" aria-labelledby="_tabs_1_python">
<div class="paragraph">
<p>Download and install Python 3 from [python.org](<a href="https://www.python.org/downloads" class="bare">https://www.python.org/downloads</a>).</p>
</div>
<div class="paragraph">
<p>This example uses the [kafka-python](<a href="https://kafka-python.readthedocs.io/en/master/" class="bare">https://kafka-python.readthedocs.io/en/master/</a>) library.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># Create and enter the project folder
mkdir redpanda-python; cd redpanda-python
# Create virtual environment
python3 -m venv .env source .env/bin/activate
# Install dependencies (.env)
pip install kafka-python</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_create_topic"><a class="anchor" href="#_create_topic"></a>Create topic</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can also create a topic programmatically:</p>
</div>
<div id="_tabs_2" class="openblock tabs is-sync is-loading">
<div class="content">
<div class="ulist tablist">
<ul>
<li id="_tabs_2_go" class="tab">
<p>Go</p>
</li>
<li id="_tabs_2_node_js" class="tab">
<p>Node.js</p>
</li>
<li id="_tabs_2_python" class="tab">
<p>Python</p>
</li>
</ul>
</div>
<div id="_tabs_2_go--panel" class="tabpanel" aria-labelledby="_tabs_2_go">
<div class="listingblock">
<div class="title">admin.go</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-go hljs" data-lang="go">package main

import (
  "context"
  "fmt"
  "github.com/twmb/franz-go/pkg/kadm"
  "github.com/twmb/franz-go/pkg/kgo"
)

func main() {
  topic := "demo"
  seeds := []string{"localhost:9092"}

  client, err := kgo.NewClient(
    kgo.SeedBrokers(seeds...),
  )
  if err != nil {
    panic(err)
  }
  defer client.Close()

  admin := kadm.NewClient(client)
  defer admin.Close()

  ctx := context.Background()
  // Create a topic with a single partition and single replica
  resp, _ := admin.CreateTopics(ctx, 1, 1, nil, topic)
  for _, ctr := range resp {
    if ctr.Err != nil {
      fmt.Printf("Unable to create topic '%s': %s", ctr.Topic, ctr.Err)
    } else {
      fmt.Printf("Created topic '%s'", ctr.Topic)
    }
  }
}</code></pre>
</div>
</div>
</div>
<div id="_tabs_2_node_js--panel" class="tabpanel" aria-labelledby="_tabs_2_node_js">
<div class="listingblock">
<div class="title">admin.ts</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">const {Kafka} = require("kafkajs")

const redpanda = new Kafka({brokers: ["localhost:9092"]})
const admin = redpanda.admin()

admin.connect().then(() =&gt; {
  admin.createTopics({
    topics: [{
      topic: "demo",
      numPartitions: 1,
      replicationFactor: 1
    }]
  })
  .then((resp) =&gt; {
    resp ? console.log("Created topic") :
      console.log("Failed to create topic")
  })
  .finally(() =&gt; admin.disconnect())
})</code></pre>
</div>
</div>
</div>
<div id="_tabs_2_python--panel" class="tabpanel" aria-labelledby="_tabs_2_python">
<div class="listingblock">
<div class="title">admin.py</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-py hljs" data-lang="py">from kafka import KafkaAdminClient
from kafka.admin import NewTopic
from kafka.errors import TopicAlreadyExistsError

admin = KafkaAdminClient(bootstrap_servers="localhost:9092")

try:
  demo_topic = NewTopic(name="demo", num_partitions=1, replication_factor=1)
  admin.create_topics(new_topics=[demo_topic])
  print("Created topic")
except TopicAlreadyExistsError as e:
  print("Topic already exists")
finally:
  admin.close()</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
<script async src="../../../_/js/vendor/tabs.js"></script>
  </body>
</html>
